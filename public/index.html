<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Recorder</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
  </head>
  <body>
    <h1>Recorder</h1>
    <h2>A website to record offline, whole-album listens to last.fm</h2>
    <form>
      <label for="artist">Artist:</label><br />
      <input type="text" id="artist" name="artist" required /><br />
      <label for="album">Album:</label><br />
      <input type="text" id="album" name="album" required /><br /><br />
      <button type="button" id="submitButton" onclick="postToServer()">
        Submit
      </button>
    </form>
    <script>
      //const data = { artist, album };
      //const options = {
      //  method: "POST",
      //  headers: { "Content-Type": "application/json" },
      //  body: JSON.stringify(data),
      //};

      //document.addEventListener("DOMContentLoaded", () => {
      //  document
      //    .getElementById("submitButton")
      //    .addEventListener("click", postToServer());
      //});

      async function postToServer() {
        // Get input data from fields
        const artist = document.getElementById("artist").value;
        const album = document.getElementById("album").value;
        const data = { artist, album };
        console.log("Data: ");
        console.log(data);

        // Setup POST request
        const options = {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data),
        };

        //POST request and give response in console
        const response = await fetch("/api", options);
        const responseJSON = await response.json();
        console.log("Response JSON: ");
        console.log(responseJSON);
      }
    </script>
    <!--<script src="sendToServer.js"></script>-->
  </body>
</html>
